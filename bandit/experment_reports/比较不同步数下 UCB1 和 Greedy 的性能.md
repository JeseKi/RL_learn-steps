# 实验条件

* 环境：多臂老虎机
* 臂数 ($K$): 10
* 步数 ($T$): 100, 1k, 10k, 100k
* 算法：$Greedy$

  * $Q_0 = 1$
* 奖励 ($Q(A)$): $Q(A) \leftarrow \frac{R-Q(A)}{N(A)}$

  * $Q(A)$: 臂 A 的奖励预期
  * $R$: 臂 A 所给的奖励
  * $N(A)$: 臂 A 被拉的次数
* $Q(UCB1)$: $Q(UCB1) = Q(A) + \sqrt{\frac{2lnN(T)}{N(A)}}$

  * $Q(UCB1)$: UCB1 分数
  * $N(T)$: 当前步数
* $R = 50$

  * $R$: 重复运行次数
* 实验目的：比较不同步数下 UCB1 和贪心算法的性能

  * 对比不同的$K$下：

    * 累积奖励的曲线如何随时间的变化
    * 累积的后悔值曲线
    * 后悔率曲线
    * 最佳臂命中率曲线
    * 收敛率
    * 收敛速度（多少步达到收敛）
* 收敛：最佳臂命中率达到 90% 及以上时，可以认为是收敛

# 实验记录

* $K=100$

  * Greedy:

    * 指标

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 1.14 | 0.14 |
      | B | 1.26 | 0.26 |
      | C | 1.54 | 0.5 |
      | D | 1.84 | 0.78 |
      | E | 2.44 | 1.16 |
      | F | 5.48 | 3.0 |
      | G | 5.24 | 3.4 |
      | H | 17.56 | 12.68 |
      | I | 17.02 | 13.78 |
      | J | 46.48 | 42.16 |
    * 图表

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111409068.png)
  * UCB1: 

    * 指标：

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 4.4 | 0.28 |
      | B | 4.82 | 0.68 |
      | C | 5.38 | 1.22 |
      | D | 6.24 | 1.86 |
      | E | 7.2 | 2.84 |
      | F | 9.04 | 4.82 |
      | G | 11.2 | 7.18 |
      | H | 14.32 | 10.74 |
      | I | 16.1 | 12.88 |
      | J | 21.3 | 19.22 |
    * 图表

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111409695.png)
* $K=1k$

  * Greedy: 

    * 指标

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 1.14 | 0.14 |
      | B | 1.26 | 0.26 |
      | C | 1.62 | 0.54 |
      | D | 1.84 | 0.78 |
      | E | 2.22 | 1.08 |
      | F | 2.56 | 1.42 |
      | G | 23.58 | 14.8 |
      | H | 27.4 | 19.8 |
      | I | 201.68 | 165.8 |
      | J | 736.7 | 669.76 |
    * 图表

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111403758.png)
  * UCB1:

    * 指标

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 14.32 | 1.22 |
      | B | 17.18 | 2.98 |
      | C | 20.5 | 5.2 |
      | D | 27.46 | 10.18 |
      | E | 35.6 | 16.26 |
      | F | 47.3 | 25.58 |
      | G | 69.02 | 43.88 |
      | H | 109.92 | 80.12 |
      | I | 203.42 | 167.52 |
      | J | 455.28 | 414.08 |
    * 图表

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111403346.png)
* $K=10k$

  * Greedy:

    * 指标

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 1.14 | 0.14 |
      | B | 1.26 | 0.26 |
      | C | 1.5 | 0.5 |
      | D | 1.76 | 0.72 |
      | E | 2.36 | 1.14 |
      | F | 2.46 | 1.34 |
      | G | 6.2 | 3.98 |
      | H | 606.76 | 441.16 |
      | I | 1215.2 | 995.46 |
      | J | 8161.36 | 7416.94 |
    * 图表：

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111358669.png)
  * UCB1:

    * 指标

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 25.42 | 2.38 |
      | B | 30.98 | 5.56 |
      | C | 39.06 | 10.38 |
      | D | 52.02 | 18.7 |
      | E | 75.66 | 34.96 |
      | F | 108.16 | 58.78 |
      | G | 176.78 | 111.96 |
      | H | 349.84 | 254.42 |
      | I | 1021.68 | 839.54 |
      | J | 8120.4 | 7377.38 |
    * 图表：

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111400079.png)
* $K=100k$

  * Greedy: 

    * 指标：

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 1.14 | 0.14 |
      | B | 1.26 | 0.26 |
      | C | 1.54 | 0.5 |
      | D | 1.7 | 0.7 |
      | E | 2.0 | 0.98 |
      | F | 6.58 | 3.5 |
      | G | 2004.28 | 1273.28 |
      | H | 8000.8 | 5815.76 |
      | I | 18001.9 | 14737.92 |
      | J | 71978.8 | 65438.34 |
    * 图表：

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111341113.png)
  * UCB1:

    * 指标：

      | 老虎机 | 拉的次数 | 奖励 |
      | :--- | :--- | :--- |
      | A | 116.84 | 10.82 |
      | B | 120.52 | 22.32 |
      | C | 119.0 | 32.88 |
      | D | 119.32 | 43.08 |
      | E | 123.14 | 55.9 |
      | F | 120.9 | 65.6 |
      | G | 124.1 | 79.52 |
      | H | 127.72 | 91.84 |
      | I | 2130.4 | 1742.5 |
      | J | 96898.06 | 88105.0 |
    * 图表：

      ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/202509111352592.png)
* 综合指标：

  ![](https://tuchuang-1317479375.cos.ap-beijing.myqcloud.com/process_compare_greedy_vs_ucb1.png)

# 实验现象

对于累积奖励，两者在$T < 4 * 10 ^5$间差距并不大，之后 UCB1 略优，但整体均呈线性增长。

对于遗憾值，UCB1 呈对数函数的变化趋势(早期增长快，后期放缓)，Greedy 则线性增长。

遗憾率与最优臂命中率表现出类似规律：Greedy 在早期改进迅速，但很快趋于常数，而 UCB1 持续改善，曲线近似倒数/对数趋势。

在收敛性上，两者差异最为显著：Greedy 能快速收敛但若早期误判则永久停留在次优；UCB1 则需要更长步数才能收敛，但在$T<3.5*10^5$前所有实验均收敛到最优臂，体现了其长期保证。

# 实验结论

UCB1 在早期由于持续探索，表现普遍不如贪婪算法；然而在长时间尺度下，它能够逐步反超，并最终实现对最优臂的稳定收敛。

与之相比，贪婪算法虽然前期表现优异，但容易过早陷入局部最优，长期表现明显劣于 UCB1。

这说明 UCB1 的核心优势在于“牺牲短期利益，换取长期最优保证”。